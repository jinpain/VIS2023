<div class="btn-group w-100" role="group" style="max-height:58px">
    <div class="btn-group w-100" role="group">
        <button type="button" class="btn btn-outline-secondary dropdown-toggle" @onclick="Get" data-bs-toggle="dropdown">
            @(IsMain?"Отделение":"Отделение по разноске")
            <br />
            @Value
        </button>
        <ul class="dropdown-menu w-100" style="max-height:300px;overflow-y:auto">
            @foreach (var item in DataManager.GetCachedData().Where(x => (x.IsMain == IsMain) && (x.IsDeleted == false)))
            {
                <li><button class="dropdown-item" @onclick="() => SetDepartmentName.InvokeAsync((IsMain, item.Name))">@item.Name</button></li>
            }
        </ul>
    </div>
    <button type="button" class="btn btn-primary bi bi-journals" @onclick="Get" data-bs-toggle="modal" data-bs-target="#departmentsDictionaryModal" />
</div>


@code 
{
    [Parameter]
    public EventCallback<(bool, string?)> SetDepartmentName { get; set; }
    [Parameter]
    public EventCallback<bool> ModalUpdated { get; set; }
    [Parameter]
    public DataManager<Department, DepartmentFilter> DataManager { get; set; }
    [Parameter]
    public string? Value { get; set; }
    [Parameter]
    public bool IsMain { get; set; }

    private async void Get()
    {
        if(DataManager.GetCachedData().Count == 0)
        {
            await DataManager.GetAllAsync();
        }
        await ModalUpdated.InvokeAsync(IsMain);
    }
}
